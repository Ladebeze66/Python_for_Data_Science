# Ex00 : Load my Dataset
## 1. Objectif pédagogique
Cet exercice nous apprend à :
- Manipuler des fichiers CSV avec pandas
- Gérer les erreurs de façon robuste (fichier inexistant, format incorrect)
- Afficher des informations sur un dataset (dimensions)
- Respecter les conventions de code Python (docstrings, gestion d'erreurs)
- Structurer un programme avec une fonction main()
## 2. Analyse du fichier de données
D'après ce que j'ai pu voir du fichier `life_expectancy_years.csv`:
- Format : CSV avec les virgules comme séparateurs
- Structure :
	- Première colonne : `country` (nom des pays)
	- Colonnes suivantes : années de 1800 à 2100 (301 colonnes d'années)
	- Dimensions attendues : (195, 302) - 195 pays x 302 colonnes total
- Contenu : Espérance de vie par pays et par année
- Données manquants : Certaines cellules sont vides (comme pour Andorra avant 1950)
### 3. Éléments techniques requis
#### Imports nécessaires :
```python
import pandas as pd
```
#### Signature de fonction requise :
```python
def load(path: str) -> pd.DataFrame:  # ou -> Dataset selon votre choix
```
#### Gestion d'erreurs à prévoir :
- Fichier inexistant (`FileNotFoundError`)
- Fichier non-CSV ou corrompu (`pd.errors.EmptyDataError, pd.errors.ParserError`)
- Permissions insuffisantes (`PermissionError`)
- Tout autre problème d'I/O
### 4. Structure du code détaillée
#### Fonction `load()` :
```python
def load(path: str) -> pd.DataFrame:
    """
    Charge un dataset CSV et affiche ses dimensions.
    
    Args:
        path (str): Chemin vers le fichier CSV
        
    Returns:
        pd.DataFrame: Le dataset chargé, ou None en cas d'erreur
    """
    try:
        # Tentative de chargement du fichier CSV
        dataset = pd.read_csv(path)
        
        # Affichage des dimensions
        rows, cols = dataset.shape
        print(f"Loading dataset of dimensions ({rows}, {cols})")
        
        # Retour du dataset
        return dataset
        
    except FileNotFoundError:
        print(f"Erreur : Le fichier '{path}' n'existe pas.")
        return None
    except pd.errors.EmptyDataError:
        print(f"Erreur : Le fichier '{path}' est vide.")
        return None
    except pd.errors.ParserError:
        print(f"Erreur : Le fichier '{path}' n'est pas un CSV valide.")
        return None
    except PermissionError:
        print(f"Erreur : Permissions insuffisantes pour lire '{path}'.")
        return None
    except Exception as e:
        print(f"Erreur inattendue : {e}")
        return None
```
#### Fonction `main()` pour les tests :
```python
def main():
    """
    Fonction principale pour tester la fonction load.
    """
    # Test avec le fichier fourni
    dataset = load("life_expectancy_years.csv")
    
    if dataset is not None:
        print(dataset)
    
    # Tests d'erreurs (optionnels pour vos propres tests)
    # load("fichier_inexistant.csv")  # Test fichier inexistant
    # load("fichier_corrompu.txt")    # Test mauvais format

if __name__ == "__main__":
    main()
```
### 5. Explication technique approfondie
**Pourquoi pandas ?**
- Efficacité : Optimisé pour les gros datasets
- Flexibilité : Gère automatiquement les types de données
- Robustesse : Gestion native des valeurs manquantes
- Méthodes intégrées : `.shape, .head(), .info()` etc.
#### Gestion d'erreurs robuste :
```python
try:
    # Code principal
except FileNotFoundError:
    # Fichier inexistant - erreur la plus courante
except pd.errors.EmptyDataError:
    # Fichier vide
except pd.errors.ParserError:
    # Problème de parsing CSV (mauvais format, encodage...)
except PermissionError:
    # Problèmes de droits d'accès
except Exception as e:
    # Catch-all pour toute autre erreur imprévisible
```
#### Affichage des dimensions :
```python
rows, cols = dataset.shape  # Tuple (lignes, colonnes)
print(f"Loading dataset of dimensions ({rows}, {cols})")
```
#### Type de retour :
- `pd.DataFrame` : Type pandas standard
- `None` : En cas d'erreur (convention Python)
- Alternative : Vous pouvez utiliser Dataset si vous définissez un type alias
### 6. Sortie attendue
Avec le fichier fourni, vous devriez obtenir :
```bash
$> python load_csv.py
Loading dataset of dimensions (195, 302)
        country  1800  1801  1802  1803  ...  2096  2097  2098  2099  2100
0   Afghanistan  28.2  28.2  28.2  28.2  ...  76.2  76.4  76.5  76.6  76.8
1        Angola  27.0  27.0  27.0  27.0  ...  79.9  80.0  79.9  80.0  80.0
...
```
### 7. Conseils de bonnes pratiques
#### Docstrings :
- Obligatoires selon les consignes
- Format Google style ou NumPy style
- Documenter Args, Returns, Raises si pertinent
#### Nommage :
- Variables en snake_case : `dataset, file_path`
- Fonctions descriptives : `load() plutôt que l()`
- Constants en UPPER_CASE si nécessaire
#### Structure du projet :
```bash
ex00/
├── load_csv.py          # Votre fonction load()
├── tester.py           # Script de test (optionnel)
└── life_expectancy_years.csv  # Données fournies
```
8. Tests recommandés
```python
def main():
    """Tests complets de la fonction load."""
    
    # Test normal
    print("=== Test fichier valide ===")
    dataset = load("life_expectancy_years.csv")
    if dataset is not None:
        print(f"Succès ! Shape: {dataset.shape}")
        print(dataset.head())  # Affiche les 5 premières lignes
    
    # Test fichier inexistant
    print("\n=== Test fichier inexistant ===")
    result = load("fichier_qui_nexiste_pas.csv")
    print(f"Résultat: {result}")
    
    # Test avec chemin relatif/absolu
    print("\n=== Test chemin relatif ===")
    dataset2 = load("./life_expectancy_years.csv")
    if dataset2 is not None:
        print("Chemin relatif fonctionne !")
```